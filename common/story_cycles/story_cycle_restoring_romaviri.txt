
### Byzantine-focused Restore Rome Story Cycle
### by Chad Uhl

story_cycle_restoring_romaviri = {

    on_setup = {
        story_owner = {
            trigger_event = {
                id = romaviri_restoration.0001
                days = 2
            }
        }
    }

    # We only pass on the story if the title heir is the Player
    on_owner_death = {
        if = {
            limit = {
                story_owner = { has_title = title:h_romaviri_empire }
                title:h_romaviri_empire.current_heir = { is_ai = no }
            }
            make_story_owner = title:h_romaviri_empire.current_heir
        }
    }


    #Maintenance group
    effect_group = {
        days = 1
        trigger = {
            story_owner = { is_landed = no }
        }
        triggered_effect = {
            trigger = { always = yes }
            effect = {
                #You became a landless adventurer with different lifestyles! Ending story prematurely.
                story_owner = { save_scope_as = story_owner }
                debug_log = "Romaviri Restoration invalidated"
                debug_log_scopes = yes
                end_story = yes
            }
        }
    }
}

restoring_romaviri_provinces_story = {

	on_setup = {
	}

	on_end = {
	}

	on_owner_death = {
	}

	effect_group = {
		days = 36 #Checked every 365 days
		
		triggered_effect = {
			trigger = {
				story_owner = {
					romaviri_restoration_is_valid_romaviri_empire_trigger = yes
					OR = {
						has_title = title:h_romaviri_empire #Not for Byzantium.
					}
				}
			}
			effect = {
				story_owner = {
					trigger_event = {
						on_action = on_action_roman_restoration_pulse
					}
				}
			}
		}
	}

	#Maintenance group
	effect_group = {
		days = 1
		trigger = {
			story_owner = { is_landed = no }
		}
		triggered_effect = {
			trigger = { always = yes }
			effect = {
				#You became a landless adventurer with different lifestyles! Ending story prematurely.
				story_owner = { save_scope_as = story_owner }
				debug_log = "Romaviri Restoration invalidated"
				debug_log_scopes = yes
				end_story = yes
			}
		}
	}
}