distribute_determined_court_position_effect = {
	$EMPLOYER$ = {
		if = {
			limit = { $CANDIDATE$ = { has_character_flag = physician_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_physician_court_position
			}
		}
		else_if = {
			limit = { 
				$CANDIDATE$ = { has_character_flag = tutor_flag } 
				NOT = { government_has_flag = government_is_mandala }
			}
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_tutor_court_position
			}
		}
		else_if = {
			limit = { 
				$CANDIDATE$ = { has_character_flag = tutor_flag } 
				government_has_flag = government_is_mandala
			}
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_guru_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = almoner_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = high_almoner_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = antiquarian_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = antiquarian_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = qadi_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = chief_qadi_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = taster_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = food_taster_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = executioner_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = executioner_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = cupbearer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = cupbearer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = lady_in_waiting_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = lady_in_waiting_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = jester_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_jester_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = poet_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_poet_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = musician_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_musician_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = gardener_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_gardener_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = architect_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = royal_architect_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = swan_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = keeper_of_swans_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = seneschal_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = seneschal_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = horse_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = master_of_horse_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = garuda_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = garuda_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = hunt_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = master_of_hunt_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = bodyguard_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = bodyguard_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = champion_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = champion_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = travel_leader_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = travel_leader_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = wet_nurse_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = wet_nurse_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = akolouthos_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = akolouthos_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = eryndar_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = eryndar_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = court_astrologer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_astrologer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = grand_preceptor_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = grand_preceptor_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = grand_guardian_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = grand_guardian_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = grand_mentor_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = grand_mentor_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = fire_dragon_engineer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = fire_dragon_engineer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = keeper_of_the_harem_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = keeper_of_the_harem_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = boyan_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = boyan_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = siege_engineer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = siege_engineer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = yurtchi_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = yurtchi_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = yeke_jarquchi_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = yeke_jarquchi_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = foreign_emissary_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = foreign_emissary_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = keeper_of_the_horses_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = keeper_of_the_horses_court_position
			}
		}
	}
}


# ERYNDAR
eryndar_title_accepted_effect = {
	basic_gained_court_position_effect = yes
}
eryndar_title_revoked_effect = {
	basic_revoked_court_position_effect = yes
}
eryndar_title_invalidated_effect = {
	basic_invalidated_court_position_effect = yes
}

# Sets variable of court position suitable to a character's skills
# Actual job is set with court_position_generator_assignment_effect after using this effect
# VAR - can be used to allow multiple event options: 'target', 'second', 'backup'
# EMPLOYER - should be the char hiring the position
# ROOT - should be the char taking the position
# Saves scope:old_holder as existing holder if they exist
# NOTE: candidates must be courtiers of the employer for this to work
court_position_generator_effect = {
	save_scope_as = candidate
	$EMPLOYER$ = { save_scope_as = liege }
	# Randomly select a fitting role and save it to a variable
	random_list = {
		2 = { # ARCHITECT
			trigger = {
				court_position_generator_pickable_trigger = { POS = royal_architect EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = royal_architect
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = royal_architect
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # SENESCHAL
			trigger = {
				court_position_generator_pickable_trigger = { POS = seneschal EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = seneschal
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = seneschal
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # TUTOR
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_tutor EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_tutor
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_tutor
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # HIGH ALMONER
			trigger = {
				court_position_generator_pickable_trigger = { POS = high_almoner EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = high_almoner
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = high_almoner
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # COURT PHYSICIAN
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_physician EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_physician
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_physician
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # ANTIQUARIAN
			trigger = {
				court_position_generator_pickable_trigger = { POS = antiquarian EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = antiquarian
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = antiquarian
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # HORSE MASTER
			trigger = {
				court_position_generator_pickable_trigger = { POS = master_of_horse EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = master_of_horse
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = master_of_horse
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # BODYGUARD
			trigger = {
				court_position_generator_pickable_trigger = { POS = bodyguard EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = bodyguard
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = bodyguard
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # HUNT MASTER
			trigger = {
				court_position_generator_pickable_trigger = { POS = master_of_hunt EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = master_of_hunt
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = master_of_hunt
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CHAMPION
			trigger = {
				court_position_generator_pickable_trigger = { POS = champion EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = champion
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = champion
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # POET
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_poet EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_poet
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_poet
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # MUSICIAN
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_musician EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_musician
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_musician
				EMPLOYER = $EMPLOYER$
			}
		}
		1 = { # COURT JESTER
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_jester EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_jester
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_jester
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # EXECUTIONER
			trigger = {
				court_position_generator_pickable_trigger = { POS = executioner EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = executioner
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = executioner
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # FOOD TASTER
			trigger = {
				court_position_generator_pickable_trigger = { POS = food_taster EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = food_taster
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = food_taster
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CUPBEARER
			trigger = {
				court_position_generator_pickable_trigger = { POS = cupbearer EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = cupbearer
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = cupbearer
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # LADY-IN-WAITING
			trigger = {
				court_position_generator_pickable_trigger = { POS = lady_in_waiting EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = lady_in_waiting
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = lady_in_waiting
				EMPLOYER = $EMPLOYER$
			}
		}
		4 = { # EUNUCH
			trigger = {
				court_position_generator_pickable_trigger = { POS = chief_eunuch EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = chief_eunuch
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = chief_eunuch
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # GARDENER
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_gardener EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_gardener
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_gardener
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # ARTIFICER
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_artificer EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_artificer
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_artificer
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CULTURAL EMISSARY
			trigger = {
				court_position_generator_pickable_trigger = { POS = cultural_emissary EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = cultural_emissary
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = cultural_emissary
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CHIEF QADI
			trigger = {
				court_position_generator_pickable_trigger = { POS = chief_qadi EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = chief_qadi
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = chief_qadi
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # GARUDA
			trigger = {
				court_position_generator_pickable_trigger = { POS = garuda EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = garuda
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = garuda
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # KEEPER OF SWANS
			trigger = {
				court_position_generator_pickable_trigger = { POS = keeper_of_swans EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = keeper_of_swans
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = keeper_of_swans
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CARAVAN MASTER
			trigger = {
				court_position_generator_pickable_trigger = { POS = travel_leader EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = travel_leader
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = travel_leader
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # WET NURSE
			trigger = {
				court_position_generator_pickable_trigger = { POS = wet_nurse EMPLOYER = $EMPLOYER$ }
			}
			modifier = {
				add = 5
				has_trait = loyal
			}
			modifier = {
				add = 10
				has_relation_friend = $EMPLOYER$
			}
			modifier = {
				add = 20
				has_relation_best_friend = $EMPLOYER$
			}
			modifier = {
				add = 30
				has_relation_lover = $EMPLOYER$
			}
			modifier = {
				add = 40
				has_relation_soulmate = $EMPLOYER$
			}
			court_position_generator_shared_modifier = {
				POS = wet_nurse
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = wet_nurse
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CAVE HERMIT
			trigger = {
				court_position_generator_pickable_trigger = { POS = cave_hermit EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = cave_hermit
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = cave_hermit
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # MASTER ASSASSIN
			trigger = {
				court_position_generator_pickable_trigger = { POS = master_assassin EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = master_assassin
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = master_assassin
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # COURT SCHOLAR
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_scholar EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_scholar
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_scholar
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CHRONICLER
			trigger = {
				court_position_generator_pickable_trigger = { POS = chronicler EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = chronicler
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = chronicler
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # AKOLOUTHOS
			trigger = {
				court_position_generator_pickable_trigger = { POS = akolouthos EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = akolouthos
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = akolouthos
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # ERYNDAR
			trigger = {
				court_position_generator_pickable_trigger = { POS = eryndar EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = eryndar
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = eryndar
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # COURT ASTROLOGER
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_astrologer EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_astrologer
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_astrologer
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # GRAND PRECEPTOR
			trigger = {
				court_position_generator_pickable_trigger = { POS = grand_preceptor EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = grand_preceptor
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = grand_preceptor
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # GRAND GUARDIAN
			trigger = {
				court_position_generator_pickable_trigger = { POS = grand_guardian EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = grand_guardian
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = grand_guardian
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # GRAND MENTOR
			trigger = {
				court_position_generator_pickable_trigger = { POS = grand_mentor EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = grand_mentor
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = grand_mentor
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # FIRE DRAGON ENGINEER
			trigger = {
				court_position_generator_pickable_trigger = { POS = fire_dragon_engineer EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = fire_dragon_engineer
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = fire_dragon_engineer
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # KEEPER OF THE HAREM
			trigger = {
				court_position_generator_pickable_trigger = { POS = keeper_of_the_harem EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = keeper_of_the_harem
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = keeper_of_the_harem
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # BOYAN
			trigger = {
				court_position_generator_pickable_trigger = { POS = boyan EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = boyan
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = boyan
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # SIEGE ENGINEER
			trigger = {
				court_position_generator_pickable_trigger = { POS = siege_engineer EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = siege_engineer
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = siege_engineer
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # YURTCHI
			trigger = {
				court_position_generator_pickable_trigger = { POS = yurtchi EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = yurtchi
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = yurtchi
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # CHERBI
			trigger = {
				court_position_generator_pickable_trigger = { POS = cherbi EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = cherbi
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = cherbi
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # YEKE JARQUCHI
			trigger = {
				court_position_generator_pickable_trigger = { POS = yeke_jarquchi EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = yeke_jarquchi
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = yeke_jarquchi
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # FOREIGN EMISSARY
			trigger = {
				court_position_generator_pickable_trigger = { POS = foreign_emissary EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = foreign_emissary
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = foreign_emissary
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # KEEPER OF THE HORSES
			trigger = {
				court_position_generator_pickable_trigger = { POS = keeper_of_the_horses EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = keeper_of_the_horses
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = keeper_of_the_horses
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # Court Guru
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_guru EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_guru
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_guru
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # Court Brahmin
			trigger = {
				court_position_generator_pickable_trigger = { POS = court_brahmin EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = court_brahmin
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = court_brahmin
				EMPLOYER = $EMPLOYER$
			}
		}
		2 = { # Khlon Glan
			trigger = {
				court_position_generator_pickable_trigger = { POS = khlon_glan EMPLOYER = $EMPLOYER$ }
			}
			court_position_generator_shared_modifier = {
				POS = khlon_glan
				EMPLOYER = $EMPLOYER$
			}
			court_position_generator_variable_effect = {
				VAR = $VAR$
				POS = khlon_glan
				EMPLOYER = $EMPLOYER$
			}
		}
	}
}

# Gives job of court position suitable to a character's skills
# Job is picked in court_position_generator_effect
# VAR - valid parameters: 'target', 'second', 'backup'
# EMPLOYER - should be the char hiring the position
# CANDIDATE - should be the char taking the position
court_position_generator_assignment_effect = {
	switch = {
		trigger = $CANDIDATE$.var:$VAR$_court_position
		# Architect
		flag:royal_architect = {
			court_position_grant_effect = { POS = royal_architect CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Seneschal
		flag:seneschal = {
			court_position_grant_effect = { POS = seneschal CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Tutor
		flag:court_tutor = {
			court_position_grant_effect = { POS = court_tutor CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# High Almoner
		flag:high_almoner = {
			court_position_grant_effect = { POS = high_almoner CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Physician
		flag:court_physician = {
			court_position_grant_effect = { POS = court_physician CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Antiquarian
		flag:antiquarian = {
			court_position_grant_effect = { POS = antiquarian CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Master of the Horse
		flag:master_of_horse = {
			court_position_grant_effect = { POS = master_of_horse CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		} 
		# Bodyguard
		flag:bodyguard = {
			court_position_grant_effect = { POS = bodyguard CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Champion
		flag:champion = {
			court_position_grant_effect = { POS = champion CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Master of the Hunt
		flag:master_of_hunt = {
			court_position_grant_effect = { POS = master_of_hunt CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Poet
		flag:court_poet = {
			court_position_grant_effect = { POS = court_poet CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Musician
		flag:court_musician = {
			court_position_grant_effect = { POS = court_musician CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Jester
		flag:court_jester = {
			court_position_grant_effect = { POS = court_jester CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Executioner
		flag:executioner = {
			court_position_grant_effect = { POS = executioner CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Food Taster
		flag:food_taster = {
			court_position_grant_effect = { POS = food_taster CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Cupbearer
		flag:cupbearer = {
			court_position_grant_effect = { POS = cupbearer CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Lady-in-waiting
		flag:lady_in_waiting = {
			court_position_grant_effect = { POS = lady_in_waiting CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		} 
		# Eunuch
		flag:chief_eunuch = {
			court_position_grant_effect = { POS = chief_eunuch CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Gardener
		flag:court_gardener = {
			court_position_grant_effect = { POS = court_gardener CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Artificer
		flag:court_artificer = {
			court_position_grant_effect = { POS = court_artificer CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Cultural Emissary
		flag:cultural_emissary = {
			court_position_grant_effect = { POS = cultural_emissary CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Chief Qadi
		flag:chief_qadi = {
			court_position_grant_effect = { POS = chief_qadi CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Garuda
		flag:garuda = {
			court_position_grant_effect = { POS = garuda CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Keeper of the Swans
		flag:keeper_of_swans = {
			court_position_grant_effect = { POS = keeper_of_swans CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Caravan Master
		flag:travel_leader = {
			court_position_grant_effect = { POS = travel_leader CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Wet Nurse
		flag:wet_nurse = {
			court_position_grant_effect = { POS = wet_nurse CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Cave Hermit
		flag:cave_hermit = {
			court_position_grant_effect = { POS = cave_hermit CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Master Assassin
		flag:master_assassin = {
			court_position_grant_effect = { POS = master_assassin CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Scholar
		flag:court_scholar = {
			court_position_grant_effect = { POS = court_scholar CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Chronciler
		flag:chronicler = {
			court_position_grant_effect = { POS = chronicler CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Akolouthos
		flag:akolouthos = {
			court_position_grant_effect = { POS = akolouthos CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Eryndar
		flag:eryndar = {
			court_position_grant_effect = { POS = eryndar CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Astrologer
		flag:court_astrologer = {
			court_position_grant_effect = { POS = court_astrologer CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Grand Preceptor
		flag:grand_preceptor = {
			court_position_grant_effect = { POS = grand_preceptor CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Grand Guardian
		flag:grand_guardian = {
			court_position_grant_effect = { POS = grand_guardian CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Grand Mentor
		flag:grand_mentor = {
			court_position_grant_effect = { POS = grand_mentor CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Fire Dragon Engineer
		flag:fire_dragon_engineer = {
			court_position_grant_effect = { POS = fire_dragon_engineer CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Keeper of the Harem
		flag:keeper_of_the_harem = {
			court_position_grant_effect = { POS = keeper_of_the_harem CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Boyan
		flag:boyan = {
			court_position_grant_effect = { POS = boyan CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Siege Engineer
		flag:siege_engineer = {
			court_position_grant_effect = { POS = siege_engineer CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Yurtchi
		flag:yurtchi = {
			court_position_grant_effect = { POS = yurtchi CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Cherbi
		flag:cherbi = {
			court_position_grant_effect = { POS = cherbi CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Yeke Jarquchi
		flag:yeke_jarquchi = {
			court_position_grant_effect = { POS = yeke_jarquchi CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Foreign Emissary
		flag:foreign_emissary = {
			court_position_grant_effect = { POS = foreign_emissary CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Keeper of the Horses
		flag:keeper_of_the_horses = {
			court_position_grant_effect = { POS = keeper_of_the_horses CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Guru
		flag:court_guru = {
			court_position_grant_effect = { POS = court_guru CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Court Brahmin
		flag:court_brahmin = {
			court_position_grant_effect = { POS = court_brahmin CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
		# Khlon Glan
		flag:khlon_glan = {
			court_position_grant_effect = { POS = khlon_glan CANDIDATE = $CANDIDATE$ EMPLOYER = $EMPLOYER$ }
		}
	}
}

# Giving out generic court positions
decide_court_position_to_give_effect = {
	$EMPLOYER$ = {
		if = {
			limit = { exists = $CANDIDATE$ }
			if = {
				limit = {
					$CANDIDATE$ = {
						OR = {
							has_trait = education_learning
							learning >= high_skill_rating
						}
					}
				}
				random_list = {
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_physician_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = physician_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_tutor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_guru_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag } # reusing same flag as tutor for simplicity later on
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = high_almoner_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = almoner_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = antiquarian_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = antiquarian_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = chief_qadi_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = qadi_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = fire_dragon_engineer_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = fire_dragon_engineer_flag }
					}
				}
			}
			else_if = {
				limit = {
					$CANDIDATE$ = {
						OR = {
							has_trait = education_intrigue
							intrigue >= high_skill_rating
						}
					}
				}
				random_list = {
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = food_taster_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = taster_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = executioner_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = executioner_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$ 
								COURT_POS = court_tutor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$ 
								COURT_POS = court_guru_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag } # reusing flag as tutor for simplicity later on
					}
				}
			}
			else_if = {
				limit = {
					$CANDIDATE$ = {
						OR = {
							has_trait = education_diplomacy
							diplomacy >= high_skill_rating
						}
					}
				}
				random_list = {
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = cupbearer_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = cupbearer_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = lady_in_waiting_court_position
							}
							$CANDIDATE$ = { is_female = yes }
						}
						$CANDIDATE$ = { add_character_flag = lady_in_waiting_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_tutor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_guru_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag } # reusing same flag as tutor for simplicity later on
					}
					20 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_jester_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = jester_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_poet_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = poet_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_musician_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = musician_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = wet_nurse_court_position
							}
							$CANDIDATE$ = { is_female = yes }
						}
						$CANDIDATE$ = { add_character_flag = wet_nurse_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = grand_preceptor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = grand_preceptor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = grand_guardian_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = grand_guardian_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = grand_mentor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = grand_mentor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = keeper_of_the_harem_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = keeper_of_the_harem_flag }
					}
				}
			}
			else_if = {
				limit = {
					$CANDIDATE$ = {
						OR = {
							has_trait = education_stewardship
							stewardship >= high_skill_rating
						}
					}
				}
				random_list = {
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_gardener_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = gardener_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = royal_architect_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = architect_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_tutor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_guru_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag } # reusing same flag as tutor for simplicity later on
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = keeper_of_swans_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = swan_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = seneschal_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = seneschal_flag }
					}
				}
			}
			else_if = {
				limit = {
					$CANDIDATE$ = {
						OR = {
							has_trait = education_martial
							martial >= high_skill_rating
						}
					}
				}
				random_list = {
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = master_of_horse_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = horse_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = garuda_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = garuda_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_tutor_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_guru_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = tutor_flag } # reusing tutor flag for simplicity later on
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = master_of_hunt_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = hunt_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = bodyguard_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = bodyguard_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = champion_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = champion_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = akolouthos_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = akolouthos_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = eryndar_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = eryndar_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = court_astrologer_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = court_astrologer_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = boyan_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = boyan_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = siege_engineer_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = siege_engineer_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = yurtchi_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = yurtchi_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = yeke_jarquchi_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = yeke_jarquchi_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = foreign_emissary_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = foreign_emissary_flag }
					}
					10 = {
						trigger = {
							can_appoint_char_to_court_position = {
								CHAR = $CANDIDATE$
								COURT_POS = keeper_of_the_horses_court_position
							}
						}
						$CANDIDATE$ = { add_character_flag = keeper_of_the_horses_flag }
					}
				}
			}
		}
	}
}

### This effect does NOT care if you are already employing someone in that position
assign_appropriate_court_position_effect = {
	if = {
		limit = {
			$CANDIDATE$ = {
				OR = {
					has_trait = education_learning
					learning >= high_skill_rating
				}
			}
		}
		random_list = {
			10 = {
				trigger = {
					can_employ_court_position_type = court_physician_court_position
				}
				$CANDIDATE$ = { add_character_flag = physician_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = high_almoner_court_position
				}
				$CANDIDATE$ = { add_character_flag = almoner_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = antiquarian_court_position
				}
				$CANDIDATE$ = { add_character_flag = antiquarian_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = chief_qadi_court_position
				}
				$CANDIDATE$ = { add_character_flag = qadi_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = siege_engineer_court_position
				}
				$CANDIDATE$ = { add_character_flag = siege_engineer_flag }
			}
		}
	}
	else_if = {
		limit = {
			$CANDIDATE$ = {
				OR = {
					has_trait = education_intrigue
					intrigue >= high_skill_rating
				}
			}
		}
		random_list = {
			10 = {
				trigger = {
					can_employ_court_position_type = food_taster_court_position
				}
				$CANDIDATE$ = { add_character_flag = taster_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = executioner_court_position
				}
				$CANDIDATE$ = { add_character_flag = executioner_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = court_astrologer_court_position
				}
				$CANDIDATE$ = { add_character_flag = court_astrologer_flag }
			}
		}
	}
	else_if = {
		limit = {
			$CANDIDATE$ = {
				OR = {
					has_trait = education_diplomacy
					diplomacy >= high_skill_rating
				}
			}
		}
		random_list = {
			10 = {
				trigger = {
					can_employ_court_position_type = cupbearer_court_position
				}
				$CANDIDATE$ = { add_character_flag = cupbearer_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = lady_in_waiting_court_position
					$CANDIDATE$ = { is_female = yes }
				}
				$CANDIDATE$ = { add_character_flag = lady_in_waiting_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = court_tutor_court_position
				}
				$CANDIDATE$ = { add_character_flag = tutor_flag }
			}
			20 = {
				trigger = {
					can_employ_court_position_type = court_jester_court_position
				}
				$CANDIDATE$ = { add_character_flag = jester_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = court_poet_court_position
				}
				$CANDIDATE$ = { add_character_flag = poet_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = court_musician_court_position
				}
				$CANDIDATE$ = { add_character_flag = musician_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = wet_nurse_court_position
					$CANDIDATE$ = { is_female = yes }
				}
				$CANDIDATE$ = { add_character_flag = wet_nurse_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = foreign_emissary_court_position
				}
				$CANDIDATE$ = { add_character_flag = foreign_emissary_flag }
			}
		}
	}
	else_if = {
		limit = {
			$CANDIDATE$ = {
				OR = {
					has_trait = education_stewardship
					stewardship >= high_skill_rating
				}
			}
		}
		random_list = {
			10 = {
				trigger = {
					can_employ_court_position_type = travel_leader_court_position
				}
				$CANDIDATE$ = { add_character_flag = travel_leader_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = court_gardener_court_position
				}
				$CANDIDATE$ = { add_character_flag = gardener_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = royal_architect_court_position
				}
				$CANDIDATE$ = { add_character_flag = architect_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = keeper_of_swans_court_position
				}
				$CANDIDATE$ = { add_character_flag = swan_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = seneschal_court_position
				}
				$CANDIDATE$ = { add_character_flag = seneschal_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = yurtchi_court_position
				}
				$CANDIDATE$ = { add_character_flag = yurtchi_flag }
			}
		}
	}
	else_if = {
		limit = {
			$CANDIDATE$ = {
				OR = {
					has_trait = education_martial
					martial >= high_skill_rating
				}
			}
		}
		random_list = {
			10 = {
				trigger = {
					can_employ_court_position_type = master_of_horse_court_position
				}
				$CANDIDATE$ = { add_character_flag = horse_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = garuda_court_position
				}
				$CANDIDATE$ = { add_character_flag = garuda_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = master_of_hunt_court_position
				}
				$CANDIDATE$ = { add_character_flag = hunt_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = bodyguard_court_position
				}
				$CANDIDATE$ = { add_character_flag = bodyguard_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = champion_court_position
				}
				$CANDIDATE$ = { add_character_flag = champion_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = akolouthos_court_position
				}
				$CANDIDATE$ = { add_character_flag = akolouthos_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = eryndar_court_position
				}
				$CANDIDATE$ = { add_character_flag = eryndar_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = boyan_court_position
				}
				$CANDIDATE$ = { add_character_flag = boyan_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = yeke_jarquchi_court_position
				}
				$CANDIDATE$ = { add_character_flag = yeke_jarquchi_flag }
			}
			10 = {
				trigger = {
					can_employ_court_position_type = keeper_of_the_horses_court_position
				}
				$CANDIDATE$ = { add_character_flag = keeper_of_the_horses_flag }
			}
		}
	}
}

distribute_determined_court_position_effect = {
	$EMPLOYER$ = {
		if = {
			limit = { $CANDIDATE$ = { has_character_flag = physician_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_physician_court_position
			}
		}
		else_if = {
			limit = { 
				$CANDIDATE$ = { has_character_flag = tutor_flag } 
				NOT = { government_has_flag = government_is_mandala }
			}
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_tutor_court_position
			}
		}
		else_if = {
			limit = { 
				$CANDIDATE$ = { has_character_flag = tutor_flag } 
				government_has_flag = government_is_mandala
			}
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_guru_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = almoner_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = high_almoner_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = antiquarian_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = antiquarian_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = qadi_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = chief_qadi_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = taster_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = food_taster_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = executioner_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = executioner_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = cupbearer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = cupbearer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = lady_in_waiting_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = lady_in_waiting_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = jester_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_jester_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = poet_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_poet_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = musician_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_musician_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = gardener_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_gardener_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = architect_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = royal_architect_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = swan_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = keeper_of_swans_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = seneschal_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = seneschal_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = horse_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = master_of_horse_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = garuda_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = garuda_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = hunt_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = master_of_hunt_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = bodyguard_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = bodyguard_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = champion_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = champion_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = travel_leader_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = travel_leader_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = wet_nurse_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = wet_nurse_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = akolouthos_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = akolouthos_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = eryndar_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = eryndar_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = court_astrologer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = court_astrologer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = grand_preceptor_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = grand_preceptor_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = grand_guardian_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = grand_guardian_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = grand_mentor_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = grand_mentor_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = fire_dragon_engineer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = fire_dragon_engineer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = keeper_of_the_harem_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = keeper_of_the_harem_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = boyan_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = boyan_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = siege_engineer_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = siege_engineer_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = yurtchi_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = yurtchi_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = yeke_jarquchi_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = yeke_jarquchi_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = foreign_emissary_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = foreign_emissary_court_position
			}
		}
		else_if = {
			limit = { $CANDIDATE$ = { has_character_flag = keeper_of_the_horses_flag } }
			appoint_court_position = {
				recipient = $CANDIDATE$
				court_position = keeper_of_the_horses_court_position
			}
		}
	}
}