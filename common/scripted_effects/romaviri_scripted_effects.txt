create_romaviri_empire_scripted_effect = {
    add_trait = augustus
    if = {
        limit = { has_dlc_feature = legends }
        create_legend_seed = {
            type = legitimizing
            quality = illustrious
            chronicle = new_title
            properties = {
                title = title:h_romaviri_empire
                founder = root
            }
        }
    }
    #Create Romaviri Empire, shift dejure/history/laws, destroy e_byzantium.

    if = {
        limit = { capital_county = { this = title:c_byzantion } }
        title:h_romaviri_empire = {
            set_capital_county = title:c_byzantion
        }
    }

    hidden_effect = {
        every_held_title = { #Should shift all dejure of all Empires owned at the time.
            limit = {
                tier = tier_empire
            }
            every_in_de_jure_hierarchy = {
                limit = {
                    tier = tier_kingdom
                }
                set_de_jure_liege_title = title:h_romaviri_empire

            }
        }
        every_held_title = { #Completely Controlled Kingdoms as well.
            limit = {
                tier = tier_kingdom
                root = { completely_controls = prev }
            }
            set_de_jure_liege_title = title:h_romaviri_empire
        }
    }

    create_title_and_vassal_change = {
        type = created
        save_scope_as = change
        add_claim_on_loss = no
    }
    # title:h_romaviri_empire = {
    # 	change_title_holder = {
    # 		holder = root
    # 		change = scope:change
    # 	}
    # 	copy_title_history = title:e_byzantium
    # }
    resolve_title_and_vassal_change = scope:change
    if = { # Move your Title MaAs to your new title if you have any
        limit = {
            government_allows = administrative
            primary_title = {
                any_title_maa_regiment = { count >= 1 }
            }
        }
        hidden_effect = {
            primary_title = { transfer_title_maa_ownership = title:h_romaviri_empire }
        }
    }
    if = { # If you have founded the Highguard, you get to keep the benefits
        limit = {
            primary_title = { has_variable = founded_highguard }
        }
        hidden_effect = {
            title:h_romaviri_empire = { set_variable = founded_highguard }
        }
    }
    hidden_effect = { set_primary_title_to = title:h_romaviri_empire }
    every_held_title = { #Should destroy all other Empires owned at the time.
        limit = {
            tier = tier_empire
            NOT = { this = title:h_romaviri_empire }
        }
        root = { destroy_title = prev }
    }
    if = { #Automatically move capital to Constantinople, unless it's been set to Rome.
        limit = {
            NOT = { capital_county = { this = title:c_roma } }
            NOT = { capital_county = { this = title:c_byzantion } }
            culture = { has_cultural_pillar = heritage_byzantine }
        }
        hidden_effect = {
            if = { #Usurp if not held personally.
                limit = {
                    NOT = { this = title:c_byzantion.holder }
                }
                create_title_and_vassal_change = {
                    type = returned
                    save_scope_as = change
                    add_claim_on_loss = no
                }
                title:c_byzantion = {
                    change_title_holder = {
                        holder = root
                        change = scope:change
                    }
                }
                resolve_title_and_vassal_change = scope:change
            }
        }
        root = { set_realm_capital = title:c_byzantion }
    }
    else_if = {
        limit = {
            NOT = { capital_county = { this = title:c_roma } }
            NOT = { capital_county = { this = title:c_byzantion } }
            NOT = { culture = { has_cultural_pillar = heritage_elf } }
            exists = title:h_romaviri_empire.holder
        }
        hidden_effect = {
            if = { #Usurp if not held personally.
                limit = {
                    NOT = { this = title:c_roma.holder }
                }
                create_title_and_vassal_change = {
                    type = returned
                    save_scope_as = change
                    add_claim_on_loss = no
                }
                title:c_roma = {
                    change_title_holder = {
                        holder = root
                        change = scope:change
                    }
                }
                resolve_title_and_vassal_change = scope:change
            }
        }
        root = { set_realm_capital = title:c_roma }
    }
    hidden_effect = {
        add_character_flag = flag_restorer_of_romaviri #used for Eulogy.
        title:h_romaviri_empire = {
            set_variable = romaviri_was_restored_by_byzantium
        }
    }
}

# create_romaviri_empire_holy_scripted_effect = {
# 	add_trait = augustus
# 	#Create romaviri Empire, shift dejure/history/laws, destroy e_hre.
# 	hidden_effect = {
# 		every_held_title = { #Should shift all dejure of all Empires owned at the time.
# 			limit = {
# 				tier = tier_empire
# 			}
# 			every_in_de_jure_hierarchy = {
# 				limit = {
# 					tier = tier_kingdom
# 				}
# 				set_de_jure_liege_title = title:h_romaviri_empire

# 			}
# 		}
# 	}
# 	create_title_and_vassal_change = {
# 		type = created
# 		save_scope_as = change
# 		add_claim_on_loss = no
# 	}
# 	title:h_romaviri_empire = {
# 		change_title_holder = {
# 			holder = root
# 			change = scope:change
# 		}
# 		set_variable = {
# 			name = variable_restored_hre #Used for flavor later.
# 			value = yes
# 		}
# 		copy_title_history = title:e_hre
# 	}
# 	resolve_title_and_vassal_change = scope:change
# 	if = { # Move your Title MaAs to your new title if you have any
# 		limit = {
# 			government_allows = administrative
# 			primary_title = {
# 				any_title_maa_regiment = { count >= 1 }
# 			}
# 		}
# 		hidden_effect = {
# 			primary_title = { transfer_title_maa_ownership = title:h_romaviri_empire }
# 		}
# 	}
# 	if = { # If you have founded the Highguard, you get to keep the benefits (you are not likely to have done it here, but better safe than sorry)
# 		limit = {
# 			primary_title = { has_variable = founded_highguard }
# 		}
# 		hidden_effect = {
# 			title:h_romaviri_empire = { set_variable = founded_highguard }
# 		}
# 	}
# 	hidden_effect = { set_primary_title_to = title:h_romaviri_empire }
# 	every_held_title = { #Should destroy all other Empires owned at the time.
# 		limit = {
# 			tier = tier_empire
# 			NOT = { this = title:h_romaviri_empire }
# 		}
# 		root = { destroy_title = prev }
# 	}
# 	hidden_effect = {
# 		title:h_romaviri_empire = {
# 			set_coa = e_hre_romaviri
# 			set_color_from_title = title:e_hre
# 		}
# 	}

# 	if = { #Automatically move capital to Rome.
# 		limit = {
# 			NOT = { capital_county = { this = title:c_roma } }
# 			exists = title:h_romaviri_empire.holder
# 		}
# 		hidden_effect = {
# 			if = { #Usurp if not held personally.
# 				limit = {
# 					NOT = { title:c_roma.holder = { this = root } }
# 				}
# 				create_title_and_vassal_change = {
# 					type = returned
# 					save_scope_as = change
# 					add_claim_on_loss = no
# 				}
# 				title:c_roma = {
# 					change_title_holder = {
# 						holder = root
# 						change = scope:change
# 					}
# 				}
# 				resolve_title_and_vassal_change = scope:change
# 			}
# 		}
# 		title:h_romaviri_empire.holder = { set_realm_capital = title:c_roma }
# 	}
# 	hidden_effect = {
# 		create_story = restoring_romaviri_provinces_story
# 		add_character_flag = flag_restorer_of_rome #used for Eulogy.
# 	}
# }
# create_romaviri_empire_italy_scripted_effect = {
# 	add_trait = augustus
# 	#Create romaviri Empire, shift dejure/history/laws, destroy e_italy.
# 	hidden_effect = {
# 		every_held_title = { #Should shift all dejure of all Empires owned at the time.
# 			limit = {
# 				tier = tier_empire
# 			}
# 			every_in_de_jure_hierarchy = {
# 				limit = {
# 					tier = tier_kingdom
# 				}
# 				set_de_jure_liege_title = title:h_romaviri_empire

# 			}
# 		}
# 	}
# 	create_title_and_vassal_change = {
# 		type = created
# 		save_scope_as = change
# 		add_claim_on_loss = no
# 	}
# 	title:h_romaviri_empire = {
# 		change_title_holder = {
# 			holder = root
# 			change = scope:change
# 		}
# 		set_variable = {
# 			name = variable_restored_italy #Used for flavor later.
# 			value = yes
# 		}
# 		copy_title_history = title:e_italy
# 	}
# 	resolve_title_and_vassal_change = scope:change
# 	if = { # Move your Title MaAs to your new title if you have any
# 		limit = {
# 			government_allows = administrative
# 			primary_title = {
# 				any_title_maa_regiment = { count >= 1 }
# 			}
# 		}
# 		hidden_effect = {
# 			primary_title = { transfer_title_maa_ownership = title:h_romaviri_empire }
# 		}
# 	}
# 	if = { # If you have founded the Highguard, you get to keep the benefits (you are not likely to have done it here, but better safe than sorry)
# 		limit = {
# 			primary_title = { has_variable = founded_highguard }
# 		}
# 		hidden_effect = {
# 			title:h_romaviri_empire = { set_variable = founded_highguard }
# 		}
# 	}
# 	hidden_effect = { set_primary_title_to = title:h_romaviri_empire }
# 	every_held_title = { #Should destroy all other Empires owned at the time.
# 		limit = {
# 			tier = tier_empire
# 			NOT = { this = title:h_romaviri_empire }
# 		}
# 		root = { destroy_title = prev }
# 	}
# 	if = { #Automatically move capital to Rome.
# 		limit = {
# 			NOT = { capital_county = { this = title:c_roma } }
# 			exists = title:h_romaviri_empire.holder
# 		}
# 		hidden_effect = {
# 			if = { #Usurp if not held personally.
# 				limit = {
# 					NOT = { title:c_roma.holder = { this = root } }
# 				}
# 				create_title_and_vassal_change = {
# 					type = returned
# 					save_scope_as = change
# 					add_claim_on_loss = no
# 				}
# 				title:c_roma = {
# 					change_title_holder = {
# 						holder = root
# 						change = scope:change
# 					}
# 				}
# 				resolve_title_and_vassal_change = scope:change
# 			}
# 		}
# 		title:h_romaviri_empire.holder = { set_realm_capital = title:c_roma }
# 	}
# 	hidden_effect = {
# 		create_story = restoring_romaviri_provinces_story
# 		add_character_flag = flag_restorer_of_rome #used for Eulogy.
# 	}
# }

# create_eastern_romaviri_empire_scripted_effect = {
# 	#Create Eastern romaviri Empire, shift dejure/history/laws, destroy e_byzantium.
# 	hidden_effect = {
# 		every_held_title = { #Should shift all dejure of all Empires owned at the time.
# 			limit = {
# 				tier = tier_empire
# 			}
# 			every_in_de_jure_hierarchy = {
# 				limit = {
# 					tier = tier_kingdom
# 					save_temporary_scope_as = kingdom_to_check
# 					any_county_in_region = {
# 						region = custom_ep3_restore_rome_eastern_empire
# 						any_this_title_or_de_jure_above = {
# 							this = scope:kingdom_to_check
# 						}
# 					}
# 				}
# 				add_to_list = target_titles
# 			}
# 		}
# 		every_held_title = { #Completely Controlled Kingdoms as well.
# 			limit = {
# 				root = { completely_controls = prev }
# 				tier = tier_kingdom
# 				save_temporary_scope_as = kingdom_to_check
# 				any_county_in_region = {
# 					region = custom_ep3_restore_rome_eastern_empire
# 					any_this_title_or_de_jure_above = {
# 						this = scope:kingdom_to_check
# 					}
# 				}
# 			}
# 			add_to_list = target_titles
# 		}
# 		every_in_list = {
# 			list = target_titles
# 			set_de_jure_liege_title = title:e_byzantium
# 		}
# 	}
# 	scope:new_holder = {
# 		create_title_and_vassal_change = {
# 			type = created
# 			save_scope_as = change
# 			add_claim_on_loss = no
# 		}
# 		title:e_byzantium = {
# 			set_title_name = e_eastern_romaviri_empire
# 			change_title_holder = {
# 				holder = scope:new_holder
# 				change = scope:change
# 			}
# 			every_in_de_jure_hierarchy = {
# 				if = {
# 					limit = {
# 						holder ?= root
# 						tier >= tier_county
# 					}
# 					change_title_holder = {
# 						holder = scope:new_holder
# 						change = scope:change
# 					}
# 				}
# 				else = {
# 					holder ?= {
# 						change_liege = {
# 							liege = scope:new_holder
# 							change = scope:change
# 						}
# 					}
# 				}
# 			}
# 		}
# 		resolve_title_and_vassal_change = scope:change
# 		hidden_effect = { set_primary_title_to = title:e_byzantium }
# 		if = { # Ensure new holder has Constantinople and the Theme of Thrace
# 			limit = {
# 				OR = {
# 					scope:new_holder != title:d_thrace.holder
# 					scope:new_holder != title:c_byzantion.holder
# 				}
# 			}
# 			hidden_effect = {
# 				create_title_and_vassal_change = {
# 					type = returned
# 					save_scope_as = change
# 					add_claim_on_loss = no
# 				}
# 				if = { #Usurp if not held personally.
# 					limit = {
# 						scope:new_holder != title:d_thrace.holder
# 					}
# 					title:d_thrace = {
# 						change_title_holder = {
# 							holder = scope:new_holder
# 							change = scope:change
# 						}
# 					}
# 				}
# 				if = {
# 					limit = {
# 						scope:new_holder != title:c_byzantion.holder
# 					}
# 					title:c_byzantion = {
# 						change_title_holder = {
# 							holder = scope:new_holder
# 							change = scope:change
# 						}
# 					}
# 				}
# 				resolve_title_and_vassal_change = scope:change
# 			}
# 			set_realm_capital = title:c_byzantion
# 		}
# 	}
# }

create_eastern_romaviri_empire_scripted_effect = {
    if = { # First we move the domicile of root, if necessary
        limit = {
            exists = domicile
            domicile.domicile_location = {
                geographical_region = custom_restore_romaviri_eastern_empire
            }
        }
        domicile = {
            move_domicile = root.capital_province
        }
    }
    scope:new_holder = { # Secondly, we handle the new liege
        add_trait = augustus
        create_title_and_vassal_change = {
            type = created
            save_scope_as = change
            add_claim_on_loss = no
        }
        if = { # We ensure they get Byzantion
            limit = {
                scope:new_holder != title:c_byzantion.holder
            }
            title:c_byzantion = {
                change_title_holder = {
                    holder = scope:new_holder
                    change = scope:change
                }
            }
        }
        # We move over the De Jure for all the basic titles
        title:e_byzantium ?= { set_de_jure_liege_title = title:h_eastern_romaviri_empire }
        title:e_illyria ?= { set_de_jure_liege_title = title:h_eastern_romaviri_empire }
        title:e_macedonia ?= { set_de_jure_liege_title = title:h_eastern_romaviri_empire }
        title:e_anatolia ?= { set_de_jure_liege_title = title:h_eastern_romaviri_empire }
        title:h_eastern_romaviri_empire = { # They get the new Roman Empire title
            change_title_holder = {
                holder = scope:new_holder
                change = scope:change
            }
        }
        root = { # They get every held title from current root in the greater region
            every_held_title = {
                limit = {
                    tier = tier_county
                    is_landless_type_title = no
                    title_province = { geographical_region = custom_restore_romaviri_eastern_empire }
                }
                change_title_holder = {
                    holder = scope:new_holder
                    change = scope:change
                }
            }
        }
        resolve_title_and_vassal_change = scope:change
        set_primary_title_to = title:h_eastern_romaviri_empire
        set_realm_capital = title:c_byzantion
    }

    create_title_and_vassal_change = {
        type = created
        save_scope_as = change
        add_claim_on_loss = no
    }
    # Then all the direct vassals who should move over
    every_vassal = {
        limit = {
            highest_held_title_tier >= tier_county
            capital_province = { geographical_region = custom_restore_romaviri_eastern_empire }
        }
        change_liege = {
            liege = scope:new_holder
            change = scope:change
        }
    }
    resolve_title_and_vassal_change = scope:change
    create_title_and_vassal_change = {
        type = created
        save_scope_as = change
        add_claim_on_loss = no
    }
    # Then vassals who are not directly in line
    every_vassal_or_below = {
        limit = {
            highest_held_title_tier >= tier_county
            capital_province = { geographical_region = custom_restore_romaviri_eastern_empire }
        }
        change_liege = {
            liege = scope:new_holder
            change = scope:change
        }
    }
    resolve_title_and_vassal_change = scope:change

    # Then change the de_jure for empires that are de jure part of the Roman Empire, but who has mostly broken free
    every_empire = {
        limit = {
            hegemony ?= title:h_romaviri_empire
            any_de_jure_county = {
                percent >= 0.51
                title_province = {
                    geographical_region = custom_restore_romaviri_eastern_empire
                }
            }
        }
        set_de_jure_liege_title = title:h_eastern_romaviri_empire
    }

    create_title_and_vassal_change = {
        type = created
        save_scope_as = change
        add_claim_on_loss = no
    }
    # Then every title that aren't county title held by root, but they have a majority of the titles under their rule
    every_held_title = {
        limit = {
            NOR = {
                tier = tier_county
                tier = tier_hegemony
                this = root.primary_title
            }
            is_landless_type_title = no
            any_de_jure_county = {
                percent >= 0.51
                title_province = {
                    geographical_region = custom_restore_romaviri_eastern_empire
                }
            }
        }
        change_title_holder = {
            holder = scope:new_holder
            change = scope:change
        }
    }
    resolve_title_and_vassal_change = scope:change

    every_empire = {
        limit = {
            OR = {
                any_de_jure_county = {
                    percent >= 0.75
                    holder = {
                        OR = {
                            this = scope:new_holder
                            any_liege_or_above = { this = scope:new_holder }
                        }
                    }
                }
                AND = {
                    de_jure_liege = title:h_eastern_romaviri_empire
                    any_de_jure_county = {
                        percent >= 0.51
                        holder = {
                            OR = {
                                this = scope:new_holder
                                any_liege_or_above = { this = scope:new_holder }
                            }
                        }
                    }
                }
            }
        }
        set_de_jure_liege_title = title:h_eastern_romaviri_empire
    }
}

claim_throne_set_mythical_founder_variable_effect = {
    if = {
        limit = {
            AND = { # Charles Martell
                OR = {
                    scope:target_title = title:k_france
                    scope:target_title = title:e_france
                }
                current_date > 1000.1.1
            }
        }
        set_variable = {
            name = mythical_founder
            value = flag:charles_martell
        }
    }
    else_if = { # Alexander
        limit = {
            OR = {
                scope:target_title = title:k_thessalonika
                scope:target_title = title:k_hellas
                scope:target_title = title:k_egypt
                AND = {
                    OR = {
                        scope:target_title = title:k_persia
                        scope:target_title = title:e_persia
                    }
                    NOR = {
                        root.faith.religion = religion:islam_religion
                        root.faith.religion = religion:zoroastrianism_religion
                    }
                }
                scope:target_title = title:k_anatolia
            }
        }
        set_variable = {
            name = mythical_founder
            value = flag:alexander
        }
    }
    else_if = { # Lech
        limit = {
            scope:target_title = title:k_poland # Lech
        }
        set_variable = {
            name = mythical_founder
            value = flag:lech
        }
    }
    else_if = { # Czech
        limit = {
            scope:target_title = title:k_bohemia # Lech
        }
        set_variable = {
            name = mythical_founder
            value = flag:czech
        }
    }
    else_if = { # Rus
        limit = {
            OR = { # Rus
                scope:target_title = title:k_white_rus
                scope:target_title = title:k_ruthenia
                scope:target_title = title:e_russia
            }
        }
        set_variable = {
            name = mythical_founder
            value = flag:rus
        }
    }
    else_if = { # Arthur
        limit = {
            OR = {
                scope:target_title = title:k_wales
                scope:target_title = title:k_cornwall
                scope:target_title = title:k_england
                scope:target_title = title:e_britannia
            }
        }
        set_variable = {
            name = mythical_founder
            value = flag:arthur
        }
    }
    else_if = { # Belisarius
        limit = {
            OR = {
                scope:target_title = title:k_italy
                scope:target_title = title:k_romagna
                scope:target_title = title:k_sardinia
                scope:target_title = title:e_italy
                scope:target_title = title:h_roman_empire
                scope:target_title = title:h_eastern_roman_empire
                scope:target_title = title:h_romaviri_empire
                scope:target_title = title:h_eastern_romaviri_empire
            }
            faith = faith:orthodox
        }
        set_variable = {
            name = mythical_founder
            value = flag:belisarius
        }
    }
    else_if = { # Romulus
        limit = {
            OR = {
                scope:target_title = title:k_italy
                scope:target_title = title:k_romagna
                scope:target_title = title:k_sardinia
                scope:target_title = title:e_italy
				scope:target_title = title:h_roman_empire
				scope:target_title = title:h_eastern_roman_empire
                scope:target_title = title:h_romaviri_empire
                scope:target_title = title:h_eastern_romaviri_empire
            }
        }
        set_variable = {
            name = mythical_founder
            value = flag:romulus
        }
    }
    else_if = { # Ardashir
        limit = {
            OR = {
                scope:target_title = title:k_persia
                scope:target_title = title:e_persia
            }
        }
        set_variable = {
            name = mythical_founder
            value = flag:ardashir
        }
    }
    else_if = { # The Pharaohs
        limit = {
            scope:target_title = title:k_egypt
            NOT = { religion = religion:islam_religion }
        }
        set_variable = {
            name = mythical_founder
            value = flag:pharaohs
        }
    }
    else_if = { # The Visigothic Kings
        limit = {
            OR = {
                scope:target_title = title:k_castille
                scope:target_title = title:k_aragon
                scope:target_title = title:k_navarra
                scope:target_title = title:k_andalusia
                scope:target_title = title:k_portugal
                scope:target_title = title:e_spain
            }
            NOT = { religion = religion:islam_religion }
        }
        set_variable = {
            name = mythical_founder
            value = flag:visigothic_kings
        }
    }
    else_if = { # Abd al-Rahman
        limit = {
            OR = {
                scope:target_title = title:k_castille
                scope:target_title = title:k_aragon
                scope:target_title = title:k_navarra
                scope:target_title = title:k_andalusia
                scope:target_title = title:k_portugal
                scope:target_title = title:e_spain
            }
            religion = religion:islam_religion
        }
        set_variable = {
            name = mythical_founder
            value = flag:abd_al_rahman
        }
    }
    else_if = { # Zenobia
        limit = {
            OR = {
                scope:target_title = title:k_syria
                scope:target_title = title:k_mesopotamia
            }
            NOT = { religion = religion:islam_religion }
        }
        set_variable = {
            name = mythical_founder
            value = flag:zenobia
        }
    }
    else = {
        set_variable = {
            name = mythical_founder
            value = flag:fallback
        }
    }
}

elector_voting_strength_byzantine_elective_modifier = {
    modifier = { #The Emperor's word is worth more than anybody else's by far.
        add = 200
        desc = tooltip_imperial_vote_strength_emperor_influence
        scope:holder = root
    }
    modifier = { #...Yet it can be reduced in certain circumstances.
        add = -20
        desc = tooltip_imperial_vote_strength_emperor_unpurpled
        scope:holder = root
        NOT = { has_trait = born_in_the_purple }
    }
    modifier = { #The Basileios must have an untarnished body.
        add = -50
        desc = tooltip_imperial_vote_strength_emperor_deformed
        scope:holder = root
        scope:title = title:e_byzantium
        is_adult = yes
        OR = {
            has_trait = disfigured
            has_trait = blind
            is_eunuch_trigger = yes
            has_trait = dwarf
            has_trait = maimed
            has_trait = wounded_3
            has_trait = clubfooted
            has_trait = lisping
            has_trait = inbred
            has_trait = hunchbacked
            has_trait = giant
            has_trait = scaly
            has_trait = albino
            has_trait = bleeder
            has_trait = gout_ridden
        }
    }
    modifier = { #Children are not leaders.
        add = -40
        desc = tooltip_imperial_vote_strength_emperor_child
        scope:holder = root
        scope:title = title:e_byzantium
        NOT = { is_adult = yes }
    }
    modifier = { #Rome is not ruled by children.
        add = -130
        desc = tooltip_imperial_vote_strength_emperor_child_roman
        scope:holder = root
        OR = {
            scope:title = title:h_roman_empire
            scope:title = title:h_eastern_roman_empire
            scope:title = title:h_romaviri_empire
            scope:title = title:h_eastern_romaviri_empire
        }
        NOT = { is_adult = yes }
    }
    modifier = { #Being a good orator.
        add = 10
        desc = tooltip_imperial_vote_strength_emperor_diplomacy
        scope:holder = root
        is_adult = yes
        diplomacy >= 10
        add = {
            value = 10
            if = {
                limit = {
                    diplomacy >= 15
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy >= 20
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy >= 25
                }
                add = 5
            }
        }
    }
    #The Electors: General modifiers.
    modifier = { #Prestigious people hold more sway.
        desc = tooltip_imperial_vote_strength_elector_prestige
        is_vassal_of = scope:holder
        scope:holder != root
        prestige_level >= 2
        add = {
            value = 5
            if = {
                limit = {
                    prestige_level >= 3
                }
                add = 5
            }
            if = {
                limit = {
                    prestige_level >= 4
                }
                add = 5
            }
            if = {
                limit = {
                    prestige_level >= 5
                }
                add = 5
            }
        }
    }

    modifier = { #People from Prestigious dynasties hold more sway.
        desc = tooltip_imperial_vote_strength_elector_prestige_dynasty
        is_vassal_of = scope:holder
        scope:holder != root
        dynasty = { dynasty_prestige_level >= 4 }
        add = {
            value = 5
            if = {
                limit = {
                    dynasty = { dynasty_prestige_level >= 5 }
                }
                add = 5
            }
            if = {
                limit = {
                    dynasty = { dynasty_prestige_level >= 6 }
                }
                add = 5
            }
            if = {
                limit = {
                    dynasty = { dynasty_prestige_level >= 7 }
                }
                add = 5
            }
            if = {
                limit = {
                    dynasty = { dynasty_prestige_level >= 8 }
                }
                add = 10
            }
            if = {
                limit = {
                    dynasty = { dynasty_prestige_level >= 9 }
                }
                add = 10
            }
            if = {
                limit = {
                    dynasty = { dynasty_prestige_level >= 10 }
                }
                add = 10
            }
        }
    }
    modifier = { #Powerful people can pull strings.
        add = 5
        desc = tooltip_imperial_vote_strength_elector_tier
        is_vassal_of = scope:holder
        scope:holder != root
        highest_held_title_tier > 2
        add = {
            value = 5
            if = {
                limit = {
                    highest_held_title_tier > 3
                }
                add = 10
            }
        }
    }
    #Commanders
    modifier = { #Martial increases a commander's influence.
        add = 10
        desc = tooltip_imperial_vote_strength_commander_martial
        is_vassal_of = scope:holder
        scope:holder != root
        martial >= 8
        has_council_position = councillor_marshal
        add = {
            value = 10
            if = {
                limit = {
                    martial >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 12
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 14
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 16
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 18
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 20
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 25
                }
                add = 5
            }
            if = {
                limit = {
                    martial > 30
                }
                add = 5
            }
        }
    }
    modifier = { #Diplomacy increases the Chancellor's influence.
        add = 10
        desc = tooltip_imperial_vote_strength_chancellor_diplomacy
        is_vassal_of = scope:holder
        scope:holder != root
        diplomacy >= 8
        has_council_position = councillor_chancellor
        add = {
            value = 10
            if = {
                limit = {
                    diplomacy >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 12
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 14
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 16
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 18
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 20
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 25
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 30
                }
                add = 5
            }
        }
    }
    modifier = { #Stewardship increases the Steward's influence.
        add = 10
        desc = tooltip_imperial_vote_strength_steward_stewardship
        is_vassal_of = scope:holder
        scope:holder != root
        stewardship >= 8
        has_council_position = councillor_steward
        add = {
            value = 10
            if = {
                limit = {
                    stewardship >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 12
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 14
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 16
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 18
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 20
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 25
                }
                add = 5
            }
            if = {
                limit = {
                    stewardship > 30
                }
                add = 5
            }
        }
    }
    modifier = { #Intrigue increases the Spymaster's influence.
        add = 10
        desc = tooltip_imperial_vote_strength_spymaster_intrigue
        is_vassal_of = scope:holder
        scope:holder != root
        intrigue >= 8
        has_council_position = councillor_spymaster
        add = {
            value = 10
            if = {
                limit = {
                    intrigue >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 12
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 14
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 16
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 18
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 20
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 25
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 30
                }
                add = 5
            }
        }
    }
    modifier = { #Learning increases the Chaplain's influence.
        add = 10
        desc = tooltip_imperial_vote_strength_chaplain_learning
        is_vassal_of = scope:holder
        scope:holder != root
        learning >= 8
        has_council_position = councillor_court_chaplain
        add = {
            value = 10
            if = {
                limit = {
                    learning >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 12
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 14
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 16
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 18
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 20
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 25
                }
                add = 5
            }
            if = {
                limit = {
                    learning > 30
                }
                add = 5
            }
        }
    }
    modifier = { #Chaplain is also the head of the ruling religion.
        add = 15
        desc = tooltip_imperial_vote_strength_chaplain_patriarch
        is_vassal_of = scope:holder
        scope:holder.faith = root.faith
        scope:holder != root
        faith = { exists = religious_head }
        scope:holder.faith.religious_head = root.faith.religious_head
        has_council_position = councillor_court_chaplain
    }
    modifier = { #Spouse Bonus
        add = 30
        desc = tooltip_imperial_vote_strength_spouse
        is_vassal_of = scope:holder
        scope:holder != root
        is_spouse_of = scope:holder
    }
    modifier = { #Those crafty Byzantines...
        desc = tooltip_imperial_vote_strength_greek_intrigue
        is_vassal_of = scope:holder
        scope:holder != root
        culture = { has_cultural_pillar = heritage_byzantine }
        intrigue >= 8
        add = {
            value = 10
            if = {
                limit = {
                    intrigue >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 12
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 14
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 16
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 18
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 20
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 25
                }
                add = 5
            }
            if = {
                limit = {
                    intrigue > 30
                }
                add = 5
            }
        }
    }
    modifier = { #Romans love their orations...
        desc = tooltip_imperial_vote_strength_roman_diplomacy
        is_vassal_of = scope:holder
        scope:holder != root
        culture = { has_cultural_pillar = heritage_latin }
        diplomacy >= 8
        add = {
            value = 10
            if = {
                limit = {
                    diplomacy >= 10
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 12
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 14
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 16
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 18
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 20
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 25
                }
                add = 5
            }
            if = {
                limit = {
                    diplomacy > 30
                }
                add = 5
            }
        }
    }
}

