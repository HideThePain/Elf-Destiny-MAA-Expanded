create_romaviri_empire_scripted_effect = {
	add_trait = augustus
	if = {
		limit = { has_dlc_feature = legends }
		create_legend_seed = {
			type = legitimizing
			quality = illustrious
			chronicle = new_title
			properties = {
				title = title:h_romaviri_empire
				founder = root
			}
		}
	}
	#Create Romaviri Empire, shift dejure/history/laws, destroy e_byzantium.

	if = {
		limit = { capital_county = { this = title:c_byzantion } }
		title:h_romaviri_empire = { 
			set_capital_county = title:c_byzantion
		}
	}

	hidden_effect = {
		every_held_title = { #Should shift all dejure of all Empires owned at the time.
			limit = {
				tier = tier_empire
			}
			every_in_de_jure_hierarchy = {
				limit = {
					tier = tier_kingdom
				}
				set_de_jure_liege_title = title:h_romaviri_empire
				
			}
		}
		every_held_title = { #Completely Controlled Kingdoms as well.
			limit = {
				tier = tier_kingdom
				root = { completely_controls = prev }
			}
			set_de_jure_liege_title = title:h_romaviri_empire
		}
	}
	
	create_title_and_vassal_change = {
		type = created
		save_scope_as = change
		add_claim_on_loss = no
	}
	# title:h_romaviri_empire = {
	# 	change_title_holder = {
	# 		holder = root
	# 		change = scope:change
	# 	}
	# 	copy_title_history = title:e_byzantium
	# }
	resolve_title_and_vassal_change = scope:change
	if = { # Move your Title MaAs to your new title if you have any
		limit = {
			government_allows = administrative
			primary_title = {
				any_title_maa_regiment = { count >= 1 }
			}
		}
		hidden_effect = {
			primary_title = { transfer_title_maa_ownership = title:h_romaviri_empire }
		}
	}
	if = { # If you have founded the Varangian Guard, you get to keep the benefits
		limit = {
			primary_title = { has_variable = founded_varangian_guard }
		}
		hidden_effect = {
			title:h_romaviri_empire = { set_variable = founded_varangian_guard }
		}
	}
	hidden_effect = { set_primary_title_to = title:h_romaviri_empire }
	every_held_title = { #Should destroy all other Empires owned at the time.
		limit = {
				tier = tier_empire
			NOT = { this = title:h_romaviri_empire }
		}
		root = { destroy_title = prev }
	}
	if = { #Automatically move capital to Constantinople, unless it's been set to Rome.
		limit = {
			NOT = { capital_county = { this = title:c_roma } }
			NOT = { capital_county = { this = title:c_byzantion } }
			culture = { has_cultural_pillar = heritage_byzantine }
		}
		hidden_effect = {
			if = { #Usurp if not held personally.
				limit = {
					NOT = { this = title:c_byzantion.holder }
				}
				create_title_and_vassal_change = {
					type = returned
					save_scope_as = change
					add_claim_on_loss = no
				}
				title:c_byzantion = {
					change_title_holder = {
						holder = root
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		root = { set_realm_capital = title:c_byzantion }
	}
	else_if = {
		limit = {
			NOT = { capital_county = { this = title:c_roma } }
			NOT = { capital_county = { this = title:c_byzantion } }
			NOT = { culture = { has_cultural_pillar = heritage_elf } }
			exists = title:h_romaviri_empire.holder
		}
		hidden_effect = {
			if = { #Usurp if not held personally.
				limit = {
					NOT = { this = title:c_roma.holder }
				}
				create_title_and_vassal_change = {
					type = returned
					save_scope_as = change
					add_claim_on_loss = no
				}
				title:c_roma = {
					change_title_holder = {
						holder = root
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		root = { set_realm_capital = title:c_roma }
	}
	hidden_effect = {
		add_character_flag = flag_restorer_of_romaviri #used for Eulogy.
		title:h_romaviri_empire = {
			set_variable = romaviri_was_restored_by_byzantium
		}
	}
}

# create_romaviri_empire_holy_scripted_effect = {
# 	add_trait = augustus
# 	#Create romaviri Empire, shift dejure/history/laws, destroy e_hre.
# 	hidden_effect = {
# 		every_held_title = { #Should shift all dejure of all Empires owned at the time.
# 			limit = {
# 				tier = tier_empire
# 			}
# 			every_in_de_jure_hierarchy = {
# 				limit = {
# 					tier = tier_kingdom
# 				}
# 				set_de_jure_liege_title = title:h_romaviri_empire
				
# 			}
# 		}
# 	}
# 	create_title_and_vassal_change = {
# 		type = created
# 		save_scope_as = change
# 		add_claim_on_loss = no
# 	}
# 	title:h_romaviri_empire = {
# 		change_title_holder = {
# 			holder = root
# 			change = scope:change
# 		}
# 		set_variable = {
# 			name = variable_restored_hre #Used for flavor later.
# 			value = yes
# 		}	
# 		copy_title_history = title:e_hre
# 	}
# 	resolve_title_and_vassal_change = scope:change
# 	if = { # Move your Title MaAs to your new title if you have any
# 		limit = {
# 			government_allows = administrative
# 			primary_title = {
# 				any_title_maa_regiment = { count >= 1 }
# 			}
# 		}
# 		hidden_effect = {
# 			primary_title = { transfer_title_maa_ownership = title:h_romaviri_empire }
# 		}
# 	}
# 	if = { # If you have founded the Varangian Guard, you get to keep the benefits (you are not likely to have done it here, but better safe than sorry)
# 		limit = {
# 			primary_title = { has_variable = founded_varangian_guard }
# 		}
# 		hidden_effect = {
# 			title:h_romaviri_empire = { set_variable = founded_varangian_guard }
# 		}
# 	}
# 	hidden_effect = { set_primary_title_to = title:h_romaviri_empire }
# 	every_held_title = { #Should destroy all other Empires owned at the time.
# 		limit = {
# 			tier = tier_empire
# 			NOT = { this = title:h_romaviri_empire }
# 		}
# 		root = { destroy_title = prev }
# 	}
# 	hidden_effect = {
# 		title:h_romaviri_empire = {
# 			set_coa = e_hre_romaviri
# 			set_color_from_title = title:e_hre
# 		}
# 	}

# 	if = { #Automatically move capital to Rome.
# 		limit = {
# 			NOT = { capital_county = { this = title:c_roma } }
# 			exists = title:h_romaviri_empire.holder
# 		}
# 		hidden_effect = {
# 			if = { #Usurp if not held personally.
# 				limit = {
# 					NOT = { title:c_roma.holder = { this = root } }
# 				}
# 				create_title_and_vassal_change = {
# 					type = returned
# 					save_scope_as = change
# 					add_claim_on_loss = no
# 				}
# 				title:c_roma = {
# 					change_title_holder = {
# 						holder = root
# 						change = scope:change
# 					}
# 				}
# 				resolve_title_and_vassal_change = scope:change
# 			}
# 		}
# 		title:h_romaviri_empire.holder = { set_realm_capital = title:c_roma }
# 	}
# 	hidden_effect = {
# 		create_story = restoring_romaviri_provinces_story
# 		add_character_flag = flag_restorer_of_rome #used for Eulogy.
# 	}
# }
# create_romaviri_empire_italy_scripted_effect = {
# 	add_trait = augustus
# 	#Create romaviri Empire, shift dejure/history/laws, destroy e_italy.
# 	hidden_effect = {
# 		every_held_title = { #Should shift all dejure of all Empires owned at the time.
# 			limit = {
# 				tier = tier_empire
# 			}
# 			every_in_de_jure_hierarchy = {
# 				limit = {
# 					tier = tier_kingdom
# 				}
# 				set_de_jure_liege_title = title:h_romaviri_empire
				
# 			}
# 		}
# 	}
# 	create_title_and_vassal_change = {
# 		type = created
# 		save_scope_as = change
# 		add_claim_on_loss = no
# 	}
# 	title:h_romaviri_empire = {
# 		change_title_holder = {
# 			holder = root
# 			change = scope:change
# 		}
# 		set_variable = {
# 			name = variable_restored_italy #Used for flavor later.
# 			value = yes
# 		}	
# 		copy_title_history = title:e_italy
# 	}
# 	resolve_title_and_vassal_change = scope:change
# 	if = { # Move your Title MaAs to your new title if you have any
# 		limit = {
# 			government_allows = administrative
# 			primary_title = {
# 				any_title_maa_regiment = { count >= 1 }
# 			}
# 		}
# 		hidden_effect = {
# 			primary_title = { transfer_title_maa_ownership = title:h_romaviri_empire }
# 		}
# 	}
# 	if = { # If you have founded the Varangian Guard, you get to keep the benefits (you are not likely to have done it here, but better safe than sorry)
# 		limit = {
# 			primary_title = { has_variable = founded_varangian_guard }
# 		}
# 		hidden_effect = {
# 			title:h_romaviri_empire = { set_variable = founded_varangian_guard }
# 		}
# 	}
# 	hidden_effect = { set_primary_title_to = title:h_romaviri_empire }
# 	every_held_title = { #Should destroy all other Empires owned at the time.
# 		limit = {
# 			tier = tier_empire
# 			NOT = { this = title:h_romaviri_empire }
# 		}
# 		root = { destroy_title = prev }
# 	}
# 	if = { #Automatically move capital to Rome.
# 		limit = {
# 			NOT = { capital_county = { this = title:c_roma } }
# 			exists = title:h_romaviri_empire.holder
# 		}
# 		hidden_effect = {
# 			if = { #Usurp if not held personally.
# 				limit = {
# 					NOT = { title:c_roma.holder = { this = root } }
# 				}
# 				create_title_and_vassal_change = {
# 					type = returned
# 					save_scope_as = change
# 					add_claim_on_loss = no
# 				}
# 				title:c_roma = {
# 					change_title_holder = {
# 						holder = root
# 						change = scope:change
# 					}
# 				}
# 				resolve_title_and_vassal_change = scope:change
# 			}
# 		}
# 		title:h_romaviri_empire.holder = { set_realm_capital = title:c_roma }
# 	}
# 	hidden_effect = {
# 		create_story = restoring_romaviri_provinces_story
# 		add_character_flag = flag_restorer_of_rome #used for Eulogy.
# 	}
# }

# create_eastern_romaviri_empire_scripted_effect = {
# 	#Create Eastern romaviri Empire, shift dejure/history/laws, destroy e_byzantium.
# 	hidden_effect = {
# 		every_held_title = { #Should shift all dejure of all Empires owned at the time.
# 			limit = {
# 				tier = tier_empire
# 			}
# 			every_in_de_jure_hierarchy = {
# 				limit = {
# 					tier = tier_kingdom
# 					save_temporary_scope_as = kingdom_to_check
# 					any_county_in_region = {
# 						region = custom_ep3_restore_rome_eastern_empire
# 						any_this_title_or_de_jure_above = {
# 							this = scope:kingdom_to_check
# 						}
# 					}
# 				}
# 				add_to_list = target_titles
# 			}
# 		}
# 		every_held_title = { #Completely Controlled Kingdoms as well.
# 			limit = {
# 				root = { completely_controls = prev }
# 				tier = tier_kingdom
# 				save_temporary_scope_as = kingdom_to_check
# 				any_county_in_region = {
# 					region = custom_ep3_restore_rome_eastern_empire
# 					any_this_title_or_de_jure_above = {
# 						this = scope:kingdom_to_check
# 					}
# 				}
# 			}
# 			add_to_list = target_titles
# 		}
# 		every_in_list = {
# 			list = target_titles
# 			set_de_jure_liege_title = title:e_byzantium
# 		}
# 	}
# 	scope:new_holder = {
# 		create_title_and_vassal_change = {
# 			type = created
# 			save_scope_as = change
# 			add_claim_on_loss = no
# 		}
# 		title:e_byzantium = {
# 			set_title_name = e_eastern_romaviri_empire
# 			change_title_holder = {
# 				holder = scope:new_holder
# 				change = scope:change
# 			}
# 			every_in_de_jure_hierarchy = {
# 				if = {
# 					limit = {
# 						holder ?= root
# 						tier >= tier_county
# 					}
# 					change_title_holder = {
# 						holder = scope:new_holder
# 						change = scope:change
# 					}
# 				}
# 				else = {
# 					holder ?= {
# 						change_liege = {
# 							liege = scope:new_holder
# 							change = scope:change
# 						}
# 					}
# 				}
# 			}
# 		}
# 		resolve_title_and_vassal_change = scope:change
# 		hidden_effect = { set_primary_title_to = title:e_byzantium }
# 		if = { # Ensure new holder has Constantinople and the Theme of Thrace
# 			limit = {
# 				OR = {
# 					scope:new_holder != title:d_thrace.holder
# 					scope:new_holder != title:c_byzantion.holder
# 				}
# 			}
# 			hidden_effect = {
# 				create_title_and_vassal_change = {
# 					type = returned
# 					save_scope_as = change
# 					add_claim_on_loss = no
# 				}
# 				if = { #Usurp if not held personally.
# 					limit = {
# 						scope:new_holder != title:d_thrace.holder
# 					}
# 					title:d_thrace = {
# 						change_title_holder = {
# 							holder = scope:new_holder
# 							change = scope:change
# 						}
# 					}
# 				}
# 				if = {
# 					limit = { 
# 						scope:new_holder != title:c_byzantion.holder
# 					}
# 					title:c_byzantion = {
# 						change_title_holder = {
# 							holder = scope:new_holder
# 							change = scope:change
# 						}
# 					}
# 				}
# 				resolve_title_and_vassal_change = scope:change
# 			}
# 			set_realm_capital = title:c_byzantion
# 		}
# 	}
# }